Vue.component("survey-template-uploader",{props:["JsonData"],data:function(){return{showDownload:!1,forwardbtnVal:"",showNext:!1,messageText:"",showPopup:!1,showClose:!1}},template:'<div class="assessment-intro">  \n\n    \x3c!--popup code here--\x3e\n    <div class="popup-layer" v-if="showPopup">\n    <div class="popup-layer__popup-model">\n        <div class="close-popup" v-if="showClose" @click="hidePopup()">\n            <div class="close"></div>\n        </div>\n           <div class="model-header" style="display:none;">heading title</div> \n              <div class="popup-model-body">                       \n                  <div class="">\n                   <label for="" class="text-label" v-html="messageText">Please provide file name.</label>\n                   <input id="downloadInput" placeholder="File name" style="display:none" class="cst-form-control">\n                  </div>              \n              </div>\n          </div>\n     </div>\n    \x3c!--popup code end--\x3e\n    <div class="cst-container">  \n     <div class="survey-intro ">\n        <div class="survey-template-inner">\n\n             <div class="survey-template">\n                 <div class="introduction-title" v-html="JsonData.heading"></div>\n                 \n                   <div class="data-btn-row clearfix">\n                        <div class="data-btn-col clearfix" @click="showHideUploadDownload(true,false,JsonData.inputData.inputOptions[0].frdBtnValue);redirect()">\n                            <div class="data-btn-wrapper">\n                                <div class="btn-template">\n                                    <div class="btn-template-title" v-html="JsonData.inputData.inputOptions[0].inputText">Input Data Using <br/> Input From</div>\n                                </div>\n                              </div>\n                        </div>\n                        <div class="data-btn-col clearfix" @click="showHideUploadDownload(false,true,JsonData.inputData.inputOptions[1].frdBtnValue)">\n                            <div class="data-btn-wrapper data-btn-active">\n                                <div class="btn-template">\n                                <div class="btn-template-title">Input Data Using <br/> Input Template</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n             </div>  \n            <div class="divider" v-if="showDownload">&nbsp;</div>\n\n            <div class="survey-template" v-if="showDownload">\n            \n              <div class="data-btn-row clearfix">\n                   <div class="data-btn-col clearfix" >\n                        <a  :href="JsonData.templateData.templateOptions[0].targetUrl" ref="download" />\n                       <div class="data-btn-wrapper" @click="downloadlink(JsonData.templateData.templateOptions[0].targetUrl)">\n                           <div class="btn-template">\n                           <i class="fas fa-cloud-download-alt"></i>\n                               <div class="btn-template-title browse-title" v-html="JsonData.templateData.templateOptions[0].inputText" >Download Template</div>\n                           </div>\n                         </div>\n                    </div>\n                    <div class="data-btn-col clearfix">\n                        <input type="file" ref="input" id="imgupload" style="display:none" accept=".xls,.xlsx,.xlsm" @change="somethingcalled(JsonData.templateData.templateOptions[1].targetUrl)"/>\n                        <div class="data-btn-wrapper" @click="openUploader()">\n                            <div class="btn-template">\n                            <i class="fas fa-cloud-upload-alt"></i>\n                            <div class="btn-template-title browse-title" v-html="JsonData.templateData.templateOptions[1].inputText">Upload Template</div>\n                            </div>\n                        </div>\n                    </div>\n               </div>\n            </div> \n                 \n        </div>\n     </div>\n     <div class="survey-begin txt-center" v-if="showNext">\n         <div class="btn-item frw" @click="handleForward" v-html="JsonData.frdBtnTxt">cscavae</div>\n     </div>\n     </div>\n   </div>    \n    ',methods:{handleForward:function(){document.getElementById("forwardbutton").click()},hidePopup:function(){this.showPopup=!1,this.showClose=!1},showHideUploadDownload:function(nxtBtn,showDownload,frdBtnValue){this.showDownload=showDownload,this.forwardbtnVal=frdBtnValue,document.getElementById("navText").value=frdBtnValue},redirect:function(){console.log("called"),this.showPopup=!0,this.messageText=this.JsonData.firstOptionMessage,setTimeout(()=>{this.handleForward()},2e3)},downloadlink:function(link){this.$refs.download.click()},openUploader:function(){this.$refs.input.click()},somethingcalled:function(link){for(var data=new FormData,fileUpload,files=$("#imgupload").get(0).files,i=0;i<files.length;i++)data.append(files[i].name,files[i]);data.append("PId",this.JsonData.pId),data.append("RespId",this.JsonData.respId),$(document).ready(()=>{$.ajax({url:link,type:"POST",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,timeout:6e5,data:data,success:successData=>{console.log(successData),console.log(successData.DataObject.Data),0==successData.DataObject.Data?(this.messageText=successData.ResultCode.MessageText,this.showClose=!0):(this.messageText=this.JsonData.successText,setTimeout(()=>{this.showPopup=!1,this.handleForward()},2e3)),this.showPopup=!0}})})}}});